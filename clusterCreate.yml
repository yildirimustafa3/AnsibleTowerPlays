---
- name: Test VMware API Connection
  hosts: myvcenter01.myhomelab.local
  gather_facts: no
  
  tasks:
    - name: Test vCenter API connection
      vmware.vmware.vmware_rest:
        hostname: myvcenter01.myhomelab.local
        username: administrator@vsphere.local
        password: VMware1!
        validate_certs: no

    - name: Create VMware Cluster
      vmware.vmware.cluster:
        hostname: myvcenter01.myhomelab.local
        username: administrator@vsphere.local
        password: VMware1!
        datacenter_name: datacenter
        cluster_name: hellocluster
        validate_certs: no
